<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="BasketMapper">

	<!-- PRODUCT S -->

	<resultMap type="com.basic.product.ProductSelectDTO" id="ProductSelect">
		<id column="productSelect_num" property="productSelect_num"
			javaType="int" />
		<result column="productSelect_name" property="productSelect_name"
			javaType="java.lang.String" />
	</resultMap>

	<resultMap type="com.basic.product.KindDTO" id="Kind">
		<id column="kind_num" property="kind_num" javaType="int" />
		<result column="kind_name" property="kind_name" javaType="java.lang.String" />
	</resultMap>

	<resultMap type="com.basic.product.ProductInfoDTO" id="ProductInfo">
		<id column="product_num" property="product_num" javaType="int" />
		<result column="productInfo_price" property="productInfo_price"
			javaType="int" />
		<result column="productInfo_reg_date" property="productInfo_reg_date"
			javaType="java.sql.Date" />
		<result column="productInfo_rec_date" property="productInfo_rec_date"
			javaType="java.sql.Date" />
		<result column="productInfo_saleRate" property="productInfo_saleRate"
			javaType="double" />
		<result column="productInfo_searchWord" property="productInfo_searchWord"
			javaType="java.lang.String" />
	</resultMap>

	<resultMap type="com.basic.product.ProductEachDTO" id="ProductEach">
		<result column="productEach_size" property="productEach_size"
			javaType="java.lang.String" />
		<result column="productEach_color" property="productEach_color"
			javaType="java.lang.String" />
		<result column="productEach_each" property="productEach_each"
			javaType="int" />
	</resultMap>

	<resultMap type="com.basic.product.ProductKindDTO" id="ProductKind">
		<result column="product_num" property="product_num" javaType="int" />
		<result column="kind_num" property="kind_num" javaType="int" />
	</resultMap>

	<resultMap type="com.basic.product.ProductPicDTO" id="ProductPic">
		<result column="productPic_pic" property="ProductPic_pic"
			javaType="java.lang.String" />
	</resultMap>

	<resultMap type="com.basic.product.ProductDTO" id="Product">
		<id column="product_num" property="product_num" javaType="int" />
		<result column="product_name" property="product_name" javaType="java.lang.String" />
	</resultMap>

	<!-- PRODUCT E -->

	<!-- Basekt S -->

	<resultMap type="com.basic.basket.BasketDTO" id="Basket">
		<result column="member_id" property="member_id" />
		<result column="product_num" property="product_num" />
		<result column="basket_num" property="basket_num" />
	</resultMap>

	<resultMap type="com.basic.basket.BasketInfoDTO" id="BasketInfo">
		<result column="basketInfo_size" property="basketInfo_size" />
		<result column="basketInfo_color" property="basketInfo_color" />
		<result column="basketInfo_each" property="basketInfo_each" />
	</resultMap>
	<!-- private BasketDTO basketDTO; private ProductDTO productDTO; private 
		ProductInfoDTO productInfoDTO; private List<ProductEachDTO> productEachDTOs; -->
	<resultMap type="com.basic.basket.BasketListDTO" id="BasketList">
		<result column="member_id" property="member_id" javaType="java.lang.String"/>
		<result column="product_num" property="product_num" />
		<result column="basket_num" property="basket_num" />
		<result column="product_name" property="product_name" javaType="java.lang.String"/>
		<result column="basketInfo_size" property="basketInfo_size" javaType="java.lang.String"/>
		<result column="basketInfo_color" property="basketInfo_color" javaType="java.lang.String" />
		<result column="basketInfo_each" property="basketInfo_each" />
		<result column="productInfo_price" property="productInfo_price"/>
		<result column="productInfo_saleRate" property="productInfo_saleRate" javaType="double"/>
		<collection property="productEachDTOs" ofType="com.basic.product.ProductEachDTO"
			resultMap="ProductEach" />

	</resultMap>



	<!-- Basekt E -->
	<select id="SelBasketList" parameterType="java.lang.String"
		resultMap="BasketList">
		select
		p.PRODUCT_NUM,p.PRODUCT_NAME,pi.PRODUCTINFO_PRICE,pi.PRODUCTINFO_SALERATE,
		pe.PRODUCTEACH_COLOR,pe.PRODUCTEACH_EACH,pe.PRODUCTEACH_SIZE,b.BASKET_NUM,bi.BASKETINFO_COLOR,
		bi.BASKETINFO_EACH,bi.BASKETINFO_SIZE from MEMBER m , PRODUCT p ,
		PRODUCTINFO pi , PRODUCTEACH pe, BASKET b, BASKETINFO bi
		where
		m.MEMBER_ID = b.MEMBER_ID and bi.BASKET_NUM = b.BASKET_NUM and
		pe.PRODUCT_NUM = p.PRODUCT_NUM
		and p.PRODUCT_NUM = b.PRODUCT_NUM and
		p.PRODUCT_NUM = pi.PRODUCT_NUM and
		m.member_id = #{member_id} ORDER BY p.PRODUCT_NUM asc,pe.PRODUCTEACH_SIZE desc
	</select>






</mapper>